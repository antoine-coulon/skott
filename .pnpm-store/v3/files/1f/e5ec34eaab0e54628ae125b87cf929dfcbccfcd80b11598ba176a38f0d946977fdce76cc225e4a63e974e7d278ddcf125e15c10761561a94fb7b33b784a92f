{"version":3,"file":"ContextPatch.mjs","names":["Chunk","Equal","Dual","Hash","ContextImpl","ContextPatchTypeId","Symbol","for","variance","a","Empty","constructor","_tag","_Input","_Output","_id","symbol","string","that","AndThen","first","second","equals","AddService","tag","service","RemoveService","UpdateService","update","empty","diff","oldValue","newValue","missingServices","Map","unsafeMap","patch","newService","entries","has","old","get","delete","combine","dual","self","context","wasServiceUpdated","patches","of","updatedContext","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","set","prepend","map","s"],"sources":["../../../../src/internal/Differ/ContextPatch.ts"],"sourcesContent":[null],"mappings":"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"}