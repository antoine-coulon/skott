{"version":3,"file":"ContextPatch.js","names":["Chunk","_interopRequireWildcard","require","Equal","Dual","Hash","_Context","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ContextPatchTypeId","Symbol","for","exports","variance","a","Empty","constructor","_tag","_Input","_Output","_id","symbol","string","that","AndThen","first","second","equals","AddService","tag","service","RemoveService","UpdateService","update","empty","diff","oldValue","newValue","missingServices","Map","unsafeMap","patch","newService","entries","old","delete","combine","dual","self","context","wasServiceUpdated","patches","of","updatedContext","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend","ContextImpl","map","s"],"sources":["../../../../src/internal/Differ/ContextPatch.ts"],"sourcesContent":[null],"mappings":"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"}