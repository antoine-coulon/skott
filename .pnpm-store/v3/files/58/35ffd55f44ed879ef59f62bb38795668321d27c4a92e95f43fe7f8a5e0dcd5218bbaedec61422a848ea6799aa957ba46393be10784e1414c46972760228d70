{"version":3,"file":"runtime.mjs","names":["Context","Either","Option","Debug","Exit","Fiber","FiberId","FiberRefs","CausePretty","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","_scheduler","unsafeFork","runtime","methodWithTrace","trace","self","scheduler","fiberId","unsafeMake","effect","traced","fiberRefs","updatedAs","currentContext","context","currentScheduler","fiberRuntime","forkAs","supervisor","getSupervisor","none","onStart","unsafeAddObserver","exit","onEnd","globalScope","add","start","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSyncExit","SyncScheduler","flush","result","unsafePoll","die","AsyncFiber","unsafeRunSyncExitOrFiber","right","left","constructor","fiber","_tag","toString","Symbol","for","FiberFailure","Error","originalCause","limit","stackTraceLimit","_id","pretty","prettyErrors","length","name","message","split","substring","stack","unsafeRunSync","OP_FAILURE","i0","unsafeRunSyncEither","untraced","either","unsafeRunPromise","Promise","resolve","reject","OP_SUCCESS","unsafeRunPromiseExit","unsafeRunPromiseEither","RuntimeImpl","make","withFiberRuntime","state","status","succeed","getFiberRef","unsafeGetFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","defaultRuntime","empty","Map","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseEitherEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","unsafeRunSyncEitherEffect","unsafeRunSyncExitOrFiberEffect","asyncEffect","restoreTrace","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","cause","deferredFailCause","deferredAwait"],"sources":["../../../src/internal_effect_untraced/runtime.ts"],"sourcesContent":[null],"mappings":"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"}