{"version":3,"file":"cause-pretty.mjs","names":["Chunk","Option","Debug","internal","StackAnnotation","renderToString","u","Object","prototype","toString","raw","JSON","parse","stringify","keys","Set","delete","size","name","_tag","message","renderTraces","chunk","ret","s","r","toFrame","runtimeDebug","filterStackFrame","push","renderFrame","renderStack","span","isNone","value","stack","length","renderFail","error","errorStack","RenderError","seq","join","renderError","parseStack","traces","frame","String","defaultErrorToLines","Error","constructor","RenderErrorTmp","errorSack","fiberStack","pretty","cause","isInterruptedOnly","errors","prettyErrors","final","Array","from","sort","a","b","map","e","includes","reduceWithContext","emptyCase","dieCase","_","err","rendered","none","failCase","interruptCase","parallelCase","l","sequentialCase","annotatedCase","v","parent","isStackAnnotation","orElse","some","annotation","traceStackLimit","unsafeLast","take","dedupeAdjacent","concat","flatMap","fileName","line","column"],"sources":["../../../src/internal_effect_untraced/cause-pretty.ts"],"sourcesContent":[null],"mappings":"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"}